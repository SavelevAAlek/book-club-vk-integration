# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Cannot read properties of undefined (reading 'authToken')"

## üö® **–ü—Ä–æ–±–ª–µ–º–∞:**
–û—à–∏–±–∫–∞ `Cannot read properties of undefined (reading 'authToken')` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –º—ã –ø—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å `req.cookies.authToken`, –Ω–æ `req.cookies` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω.

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**

### 1. **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω cookie-parser:**
```bash
npm install cookie-parser
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω middleware –≤ server.js:**
```javascript
const cookieParser = require('cookie-parser');
// ...
app.use(cookieParser());
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞ cookies:**
```javascript
app.use((req, res, next) => {
  console.log('Cookies:', req.cookies);
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
});
```

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

### 1. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Vercel:**
- `JWT_SECRET` - —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ JWT
- `NODE_ENV=production` - –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã cookies

### 2. **–ü–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
```bash
git add .
git commit -m "Add cookie-parser middleware and debugging"
git push
```

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel:**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Vercel
- –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Üí Functions ‚Üí View Function Logs
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏

### 4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
- Application ‚Üí Cookies
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ cookies `authToken`, `codeVerifier`, `state`

## üîç **–ß—Ç–æ –ø–æ–∫–∞–∂—É—Ç –ª–æ–≥–∏:**

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
1. **Cookies:** `{ authToken: '...', codeVerifier: '...', state: '...' }`
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:** `–ò–º—è –§–∞–º–∏–ª–∏—è`
3. **–ò–ª–∏:** `–¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç` / `–ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω`

## üìù **–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:**

- [ ] `cookie-parser` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] `cookieParser()` middleware –¥–æ–±–∞–≤–ª–µ–Ω –≤ server.js
- [ ] `JWT_SECRET` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Vercel
- [ ] `NODE_ENV=production` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Vercel
- [ ] –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] Cookies –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ Cookies –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å—è—Ç—Å—è
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ cookies
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º
- ‚úÖ –û—à–∏–±–∫–∞ "Cannot read properties of undefined" –∏—Å—á–µ–∑–∞–µ—Ç
